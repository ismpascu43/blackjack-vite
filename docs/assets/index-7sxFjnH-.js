(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();const j=e=>{if(!e)throw new Error("carta es requerida");const o=document.createElement("img");return o.src=`assets/cartas/${e}.png`,o.classList.add("carta"),o},y=()=>{const e=["C","D","H","S"],o=["A","J","Q","K"];let s=[];for(let r=2;r<=10;r++)for(let t of e)s.push(r+t);for(let r of e)for(let t of o)s.push(t+r);for(let r=s.length-1;r>0;r--){const t=Math.floor(Math.random()*(r+1));[s[r],s[t]]=[s[t],s[r]]}return console.log(s),s},d=(e,o)=>{if(!(window.juegoActivo!==void 0?window.juegoActivo:!0))return;const r=document.querySelector("#mensaje-resultado");r.classList.remove("mensaje-victoria","mensaje-empate","mensaje-derrota","mensaje-oculto"),r.classList.add(o),r.textContent=e,o==="mensaje-victoria"?new Audio("/assets/audio/win01.mp3").play():o==="mensaje-empate"?new Audio("/assets/audio/matchedCards01.mp3").play():o==="mensaje-derrota"&&new Audio("/assets/audio/lost01.mp3").play(),r.style.display="block";const t=setTimeout(()=>{window.juegoActivo!==void 0&&!window.juegoActivo||(r.style.display="none")},5e3);window.temporizadoresActivos&&window.temporizadoresActivos.push(t)},h=e=>{if(!e||e.length===0)throw"No hay cartas en el deck";return e.pop()},w=(e,o,s,r=[],t=[],a=!0)=>{if(!e)throw new Error("puntosMinimos es requerido");if(!o)throw new Error("puntosHTML es requerido");let i=0;const g=()=>{if(!a)return;const v=h(r);new Audio("/assets/audio/card01.mp3").play(),i=i+A(v),o.innerText=i;const L=j(v);if(s.append(L),!(e>21))if(i<e&&e<=21){const f=setTimeout(g,700);t.push(f)}else{const f=setTimeout(()=>{a&&(i===e?d("¡Empate!","mensaje-empate"):e>21?d("¡Crupier gana!","mensaje-derrota"):i>21?d("¡Jugador gana!","mensaje-victoria"):d("¡Crupier gana!","mensaje-derrota"))},100);t.push(f)}},b=setTimeout(g,700);t.push(b)},A=e=>{const o=e.substring(0,e.length-1);return isNaN(o)?o==="A"?11:10:o*1};let c=[],n=0;window.juegoActivo=!0;window.temporizadoresActivos=[];const l=document.querySelector("#btnPedir"),m=document.querySelector("#btnDetener"),T=document.querySelector("#btnNuevo"),C=document.querySelector("#jugador-cartas"),p=document.querySelector("#computadora-cartas"),u=document.querySelectorAll("small");y();l.addEventListener("click",()=>{const e=h(c);new Audio("/assets/audio/card01.mp3").play(),n=n+A(e),u[0].innerText=n;const s=j(e);C.append(s),n>21?(d("¡Te has pasado!","mensaje-derrota"),l.disabled=!0,m.disabled=!0,w(n,u[1],p,c,window.temporizadoresActivos,window.juegoActivo)):n===21&&(d("¡21, genial!","mensaje-victoria"),l.disabled=!0,m.disabled=!0,w(n,u[1],p,c,window.temporizadoresActivos,window.juegoActivo))});m.addEventListener("click",()=>{l.disabled=!0,m.disabled=!0,w(n,u[1],p,c,window.temporizadoresActivos,window.juegoActivo)});T.addEventListener("click",()=>{console.clear(),window.temporizadoresActivos.forEach(e=>clearTimeout(e)),window.temporizadoresActivos=[],window.juegoActivo=!1,setTimeout(()=>{window.juegoActivo=!0,c=[],c=y(),n=0,u[0].innerText=0,u[1].innerText=0,p.innerHTML="",C.innerHTML="";const e=document.querySelector("#mensaje-resultado");e.style.display="none",l.disabled=!1,m.disabled=!1},100)});
